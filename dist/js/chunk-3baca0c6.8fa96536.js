(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3baca0c6"],{"0a49":function(t,e,a){var s=a("9b43"),r=a("626a"),n=a("4bf8"),o=a("9def"),i=a("cd1c");t.exports=function(t,e){var a=1==t,c=2==t,l=3==t,u=4==t,d=6==t,h=5==t||d,p=e||i;return function(e,i,v){for(var f,m,y=n(e),g=r(y),b=s(i,v,3),_=o(g.length),x=0,w=a?p(e,_):c?p(e,0):void 0;_>x;x++)if((h||x in g)&&(f=g[x],m=b(f,x,y),t))if(a)w[x]=m;else if(m)switch(t){case 3:return!0;case 5:return f;case 6:return x;case 2:w.push(f)}else if(u)return!1;return d?-1:l||u?u:w}}},1169:function(t,e,a){var s=a("2d95");t.exports=Array.isArray||function(t){return"Array"==s(t)}},2183:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-container",[a("el-main",{staticClass:"search"},[a("el-form",{ref:"stuForm",staticClass:"form-inline",staticStyle:{margin:"0 auto"},attrs:{inline:!0,model:t.stuForm}},[a("el-form-item",{attrs:{label:"学号查询"}},[a("el-autocomplete",{attrs:{"popper-class":"my-autocomplete","fetch-suggestions":t.querySearch,placeholder:"请输入学号或姓名","trigger-on-focus":!1},on:{select:t.handleSelect},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.item;return[a("div",{staticClass:"name"},[t._v(t._s(s.name))]),a("span",{staticClass:"addr"},[t._v(t._s(s.value))])]}}]),model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[a("i",{staticClass:"el-icon-edit el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmitPerson}},[t._v("查询")])],1)],1)],1)],1),a("el-container",[a("el-aside",{attrs:{width:"450px"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("学生卡片")])]),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"show-header":!1}},[a("el-table-column",{attrs:{prop:"key",width:"180"}}),a("el-table-column",{attrs:{prop:"value"}})],1)],1)])],1),a("el-main",[a("el-tag",{attrs:{type:"info",effect:"dark"}},[t._v("学生描述\n\t\t\t"),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.stuList,"max-height":"500"}},[a("el-table-column",{attrs:{fixed:"",prop:"tags",label:"tags",width:"150"}}),a("el-table-column",{attrs:{prop:"values",label:"values",width:"120"}}),a("el-table-column",{attrs:{prop:"level",label:"level",width:"120"}})],1)],1)],1)],1),a("el-container",[a("el-main",{staticStyle:{height:"auto"}},[a("el-tag",{attrs:{type:"info",effect:"dark"}},[t._v("学生行为")]),a("el-tabs",{on:{"tab-click":t.stubehavior},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"学生成绩",name:"stuscore"}},[a("el-container",{attrs:{id:"stuscoretab"}},[a("el-header"),a("el-container",[a("el-main",{staticStyle:{height:"100%"}},[a("el-carousel",{attrs:{"indicator-position":"outside",height:"350px",autoplay:!1}},[a("el-carousel-item",[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("学科平均分")])]),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.studentscore.avg)),a("span",{staticStyle:{"font-size":"10px"}},[t._v("分")])])],1),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("获得学分")])]),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.studentscore.credit)),a("span",{staticStyle:{"font-size":"10px"}},[t._v("分")])])],1),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("平均学分绩点")])]),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.studentscore.avgcreditjd)+"\n\t\t\t\t\t\t\t\t\t\t\t\t")])],1)],1),a("br"),a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("智育分")])]),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.studentscore.knowledge)),a("span",{staticStyle:{"font-size":"10px"}},[t._v("分")])])],1),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("德育分")])]),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.studentscore.moral)),a("span",{staticStyle:{"font-size":"10px"}},[t._v("分")])])],1),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("体育分")])]),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.studentscore.sports)),a("span",{staticStyle:{"font-size":"10px"}},[t._v("分")])])],1)],1)],1),a("el-carousel-item",[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("成绩Top1:"+t._s(t.studentscore.top1.name))])]),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.studentscore.top1.score)),a("span",{staticStyle:{"font-size":"10px"}},[t._v("分")])])],1),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("成绩Top2:"+t._s(t.studentscore.top2.name))])]),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.studentscore.top2.score)),a("span",{staticStyle:{"font-size":"10px"}},[t._v("分")])])],1),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("成绩Top3:"+t._s(t.studentscore.top3.name))])]),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.studentscore.top3.score)),a("span",{staticStyle:{"font-size":"10px"}},[t._v("分")])])],1)],1),a("br"),a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("最高分")])]),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.studentscore.topscore)),a("span",{staticStyle:{"font-size":"10px"}},[t._v("分")])])],1),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("专业排名")])]),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.studentscore.sorted)+"\n\t\t\t\t\t\t\t\t\t\t\t\t")])],1),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("挂科率")])]),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.studentscore.fails)),a("span",{staticStyle:{"font-size":"10px"}},[t._v("%")])])],1)],1)],1)],1)],1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"成绩走势",name:"trend"}},[a("div",{staticStyle:{width:"1000px",height:"350px"},attrs:{id:"trendchart"}})])],1)],1)],1)],1)},r=[],n=(a("6d67"),a("28a5"),a("57e7"),a("d25f"),a("7f7f"),a("4917"),a("9ebe"),a("5c96"),a("a163")),o={data:function(){return{stuList:[],stuForm:{stuid:""},calendarData:[{months:["09","11"],days:["15"],year:["2019"],things:"迟到"},{months:["11"],days:["20"],things:"缺勤"}],datevalue:new Date,activities:[{content:"活动按期开始",timestamp:"2018-04-15"},{content:"通过审核",timestamp:"2018-04-13"},{content:"创建成功",timestamp:"2018-04-11"}],labelPosition:"top",wordcloud:{stopwd:"",userdict:""},flag:3,studentscore:{avg:"无",credit:"无",avgcreditjd:"无",moral:"无",knowledge:"无",sports:"无",top1:{name:"无",score:"无"},top2:{name:"无",score:"无"},top3:{name:"无",score:"无"},topscore:"无",sorted:"无",fails:"无"},mks:[],savemsg:"保存",imagePathPrefix:"",imagePath:n,searchinput:"",stuadvices:[],state:"",timeout:null,drawer:!1,direction:"ltr",activeName:"stuscore",options:[{value:"0",label:"请选择学期"},{value:"2017-2018",label:"2017-2018"},{value:"2018-2019",label:"2018-2019"}],value:"2018-2019",tableData:[{key:"学号",value:"暂无数据"},{key:"姓名",value:"暂无数据"},{key:"性别",value:"暂无数据"},{key:"年级",value:"暂无数据"},{key:"专业",value:"暂无数据"},{key:"班级",value:"暂无数据"},{key:"民族",value:"暂无数据"},{key:"政治面貌",value:"暂无数据"},{key:"家庭住址",value:"暂无数据"},{key:"出生日期",value:"暂无数据"},{key:"寝室",value:"暂无数据"},{key:"学生类型",value:"暂无数据"}]}},methods:{onSubmitPerson:function(){var t=this,e=this.state;e.match(/^[0-9]*$/)?(this.drawSorcetrend(e),this.getStudentScore(e),this.$http.get("http://127.0.0.1:5000/stuAnalysis/searchstu?number="+e).then((function(e){var a=e.data;t.tableData=[{key:"学号",value:a.studentno},{key:"姓名",value:a.studentname},{key:"性别",value:a.sex},{key:"年级",value:a.termyear},{key:"专业",value:a.major},{key:"班级",value:a.class},{key:"民族",value:a.mz},{key:"政治面貌",value:a.zzmm},{key:"家庭住址",value:a.address},{key:"出生日期",value:a.birthday},{key:"寝室",value:a.dormitory},{key:"学生类型",value:a.stutype}],t.drawMksRadar(t.tableData[0]["value"],t.value),!0,loadingInstance.close()})).catch((function(e){alert(t.$errmsg(e)),loadingInstance.close(),t.tableData=[],!0})),this.$http.get("http://127.0.0.1:5000/stuAnalysis/analysis?number="+e).then((function(e){var a=e.data,s=a;console.log(a),console.log(s),t.stuList=s})).catch((function(e){console.log(e),t.autoopen("错误","网络错误,访问超时！")}))):(alert("请输入学号进行查询"),loadingInstance.close(),this.tableData=[])},stubehavior:function(t,e){switch(console.log(t.name),t.name){case"stuscore":break;case"trend":break;case"reward":break;case"punish":break;case"kq":break}},changeTyChart:function(){},querySearch:function(t,e){var a=this.stuadvices,s=t?a.filter(this.createFilter(t)):a;clearTimeout(this.timeout),this.timeout=setTimeout((function(){e(s)}),2e3*Math.random())},createFilter:function(t){return function(e){return 0===e.name.toLowerCase().indexOf(t.toLowerCase())}},handleSelect:function(t){console.log(t)},drawerhandleClose:function(t){var e=this;this.$confirm("确认关闭？").then((function(a){e.wordcloud.stopwd="",e.wordcloud.userdict="",t()})).catch((function(t){}))},saveWordCloudSettings:function(){var t=this;this.flag=1,this.savemsg="保存中";var e=this.wordcloud.stopwd,a=this.wordcloud.userdict,s=e.split(" "),r=a.split(" ");1==s.length&&0==s[0].length?this.flag+=1:this.$http.put("admin/addstopwords",this.$qs.stringify({stopwd:s},{indices:!1})).then((function(e){var a=e.data;t.addswdmsg=a,t.flag+=1})).catch((function(e){alert(t.$errmsg(e)),t.flag+=1})),1==r.length&&0==r[0].length?this.flag+=1:this.$http.put("admin/adduserdict",this.$qs.stringify({userdict:r},{indices:!1})).then((function(e){var a=e.data;t.addudtmsg=a,t.flag+=1})).catch((function(e){alert(t.$errmsg(e)),t.flag+=1}))},getStudentScore:function(t){var e=this;this.$http.get("http://127.0.0.1:5000/stuAnalysis/top?number="+t).then((function(t){var a=t.data;e.studentscore.top1.name=a[0]["cname"],e.studentscore.top2.name=a[1]["cname"],e.studentscore.top3.name=a[2]["cname"],e.studentscore.top1.score=a[0]["score"],e.studentscore.top2.score=a[1]["score"],e.studentscore.top3.score=a[2]["score"],e.studentscore.topscore=a[0]["score"]})).catch((function(t){})),this.$http.get("http://127.0.0.1:5000/stuAnalysis/credit?number="+t).then((function(t){var a=t.data,s=0,r=0,n=0;a.map((function(t){s+=t["score"],t["score"]>=60&&(r+=t["credit"],n+=t["credit"]*t["jd"])})),e.studentscore.avg=(s/a.length).toFixed(2),e.studentscore.credit=r.toFixed(2),e.studentscore.avgcreditjd=(n/r).toFixed(2)})).catch((function(t){alert(e.$errmsg(t))})),this.$http.get("http://127.0.0.1:5000/stuAnalysis/rank?number="+t).then((function(t){var a=t.data;e.studentscore.sorted=a})),this.$http.get("http://127.0.0.1:5000/stuAnalysis/searchfailsRate?number="+t).then((function(t){var a=t.data;return e.studentscore.fails=100*a}))},drawSorcetrend:function(t){var e=this.$echarts.init(document.getElementById("trendchart"));this.$http.get("http://127.0.0.1:5000/stuAnalysis/trend?number="+t).then((function(t){var a=t.data;console.log(a);var s=a["year"],r=a["score"],n=["#675bba"],o={tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["平均成绩"]},xAxis:[{type:"category",axisTick:{alignWithLabel:!0},data:s}],yAxis:[{type:"value",name:"平均成绩",min:0,max:5,position:"left",axisLine:{lineStyle:{color:n[2]}},axisLabel:{formatter:"{value}"},interval:1}],series:[{name:"平均成绩",type:"line",yAxisIndex:0,data:r}]};e.setOption(o)}))},autocheck:function(){var t=this.$param("sno");""!=t&&t.match(/^[0-9]*$/)&&(this.state=this.$param("sno"),this.onSubmitPerson())}},components:{},mounted:function(){this.drawBlankRadar(),this.autocheck()},beforeMount:function(){console.log("bef",this.$param("sno"))},watch:{state:function(t,e){var a=this;if(t.match(/^[\u4e00-\u9fa5]+$/)){if(t.length>10)return;var s={sname:t};this.$http.post("stuAnalysis/searchadv",this.$qs.stringify(s)).then((function(t){var e=t.data;a.stuadvices=e})).catch((function(t){404!=t.response.status&&alert(a.$errmsg(t))}))}},flag:function(t){3==t&&this.$message({message:"保存成功！",type:"success"})}}},i=o,c=(a("4ac0"),a("2877")),l=Object(c["a"])(i,s,r,!1,null,"6eb4f530",null);e["default"]=l.exports},"2f21":function(t,e,a){"use strict";var s=a("79e5");t.exports=function(t,e){return!!t&&s((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"4ac0":function(t,e,a){"use strict";a("ace2")},"57e7":function(t,e,a){"use strict";var s=a("5ca1"),r=a("c366")(!1),n=[].indexOf,o=!!n&&1/[1].indexOf(1,-0)<0;s(s.P+s.F*(o||!a("2f21")(n)),"Array",{indexOf:function(t){return o?n.apply(this,arguments)||0:r(this,t,arguments[1])}})},"6d67":function(t,e,a){"use strict";var s=a("5ca1"),r=a("0a49")(1);s(s.P+s.F*!a("2f21")([].map,!0),"Array",{map:function(t){return r(this,t,arguments[1])}})},"7f7f":function(t,e,a){var s=a("86cc").f,r=Function.prototype,n=/^\s*function ([^ (]*)/,o="name";o in r||a("9e1e")&&s(r,o,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(t){return""}}})},a163:function(t,e,a){t.exports=a.p+"img/blank.f079b8b0.png"},ace2:function(t,e,a){},cd1c:function(t,e,a){var s=a("e853");t.exports=function(t,e){return new(s(t))(e)}},d25f:function(t,e,a){"use strict";var s=a("5ca1"),r=a("0a49")(2);s(s.P+s.F*!a("2f21")([].filter,!0),"Array",{filter:function(t){return r(this,t,arguments[1])}})},e853:function(t,e,a){var s=a("d3f4"),r=a("1169"),n=a("2b4c")("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),s(e)&&(e=e[n],null===e&&(e=void 0))),void 0===e?Array:e}}}]);
//# sourceMappingURL=chunk-3baca0c6.8fa96536.js.map